### メモ
フロントエンドどこにデプロイするか？→知りたかったやつ
- AWSで手っ取り早く：Amplify
- AWS以外：Vercel
- AWSでこだわる：CloudFront + S3 + Lambda

IAMロール：サービスごとに使い分け
IMAポリシー：サービス間で使い回し

WAF
- 特定のIPにアクセスを絞る
- セキュリティやキャッシュの設定

Amplify
- WAF適用不可
- CloudFrontを隠蔽するためセキュリティやキャッシュの設定が難しい 

→Amplifyの前段にCloudFrontを置くのが良い

CloudFront
- WAF適用可能
- Lambda@Edgeなど便利ツールを使える

### CloudFront深掘り
- 静的コンテンツのキャッシュ
- リバプロによるリクエストの振り分け
- OACによりCloudFrontからのみS3へアクセス
- WAFにより通信制限
- https証明書を付ける
- Lambda@Edge（複雑）を付ける
- CloudFrontFunction（単純）を付ける
- 署名付きクッキーでログインユーザーのみ静的コンテンツを見せる
- カスタムエラーレスポンス

基本APIへのリクエストは情報漏洩を防ぐためにCachingDisabledでキャッシュを完全に無効化する！

S3に画像をアップしても変わらないときはCloudFrontのキャッシュを疑え！

CloudFront→Amplify→APIのとき、リクエストパラメータがAPIに送られないときはAmplifyのオリジンリクエストポリシーを疑え！

静的コンテンツの閲覧制限はとりあえず署名付きクッキーで、複雑な要件ならLambda@Edge

CORSの設定はオリジン側で

Cloudflare R2でコスト削減できるかも

### 学習時間
Today:3.5h
Total:76.7h